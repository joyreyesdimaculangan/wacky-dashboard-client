<nav
  class="bg-green-600 border-b border-green-600 py-[clamp(1rem,3vw,1.5rem)] shadow-lg fixed w-full top-0 z-50"
>
  <div
    class="max-w-screen-xl mx-auto flex items-center justify-between px-[clamp(1rem,3vw,3rem)]"
  >
    <!-- Logo and Brand -->
    <div class="flex-none">
      <a
        [routerLink]="['/home']"
        fragment="home"
        class="flex items-center space-x-[clamp(0.5rem,2vw,1rem)]"
      >
        <img
          src="assets/images/Wacky's Logo.png"
          class="h-[clamp(3rem,8vw,5rem)] w-[clamp(3rem,8vw,5rem)]"
          alt="Wacky's Logo"
        />
        <h1 class="font-serif text-green-100 leading-tight">
          <span class="block text-[clamp(1.25rem,3vw,2.5rem)] font-bold"
            >WACKY'S</span
          >
          <span class="block text-[clamp(0.875rem,2vw,1.5rem)] tracking-wide"
            >FOOD HOUSE</span
          >
        </h1>
      </a>
    </div>

    <!-- Centered nav items (hidden on mobile) -->
    <div class="hidden md:flex justify-center flex-grow">
      <ul class="flex space-x-[clamp(1rem,3vw,2rem)] font-medium">
        <li>
          <button
            [routerLink]="['/home']"
            fragment="home"
            [ngClass]="{ 'bg-white/10': isActive('home') }"
            class="text-[clamp(0.875rem,1.5vw,1rem)] text-green-100 hover:text-green-700 px-[clamp(0.75rem,2vw,1rem)] py-[clamp(0.5rem,1.5vw,0.75rem)] rounded-md transition-all duration-200"
          >
            Home
          </button>
        </li>
        <li>
          <button
            [routerLink]="['/home']"
            fragment="menu"
            [ngClass]="{ 'bg-white-100': isActive('menu') }"
            class="text-[clamp(0.875rem,1.5vw,1rem)] text-green-100 hover:text-green-700 px-[clamp(0.75rem,2vw,1rem)] py-[clamp(0.5rem,1.5vw,0.75rem)] rounded-md transition-all duration-200"
          >
            Menu
          </button>
        </li>
        <li>
          <button
            [routerLink]="['/home']"
            fragment="services"
            [ngClass]="{ 'bg-white-100': isActive('services') }"
            class="text-[clamp(0.875rem,1.5vw,1rem)] text-green-100 hover:text-green-700 px-[clamp(0.75rem,2vw,1rem)] py-[clamp(0.5rem,1.5vw,0.75rem)] rounded-md transition-all duration-200"
          >
            Services
          </button>
        </li>
        <li>
          <button
            [routerLink]="['/home']"
            fragment="reviews"
            [ngClass]="{ 'bg-white-100': isActive('reviews') }"
            class="text-[clamp(0.875rem,1.5vw,1rem)] text-green-100 hover:text-green-700 px-[clamp(0.75rem,2vw,1rem)] py-[clamp(0.5rem,1.5vw,0.75rem)] rounded-md transition-all duration-200"
          >
            Reviews
          </button>
        </li>
        <li>
          <button
            [routerLink]="['/home']"
            fragment="inquiry"
            [ngClass]="{ 'bg-white-100': isActive('inquiry') }"
            class="text-[clamp(0.875rem,1.5vw,1rem)] text-green-100 hover:text-green-700 px-[clamp(0.75rem,2vw,1rem)] py-[clamp(0.5rem,1.5vw,0.75rem)] rounded-md transition-all duration-200"
          >
            Contact Us
          </button>
        </li>
      </ul>
    </div>

    <!-- Mobile Menu Toggle -->
    <div class="flex items-center space-x-[clamp(0.5rem,1.5vw,1rem)]">
      <button
        class="md:hidden text-white hover:text-green-200 transition-colors duration-200"
        (click)="toggleMobileMenu()"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <!-- Profile icon stays on the far right -->
      <div class="flex-none relative flex items-center" *ngIf="!isLoggedIn()">
        <button
          (click)="signIn()"
          class="hidden sm:block py-[clamp(0.5rem,2vw,0.75rem)] px-[clamp(1rem,3vw,1.25rem)] text-[clamp(0.875rem,2vw,1rem)] text-green-100 hover:bg-white hover:text-green-700 rounded transition-all duration-200 font-poppins"
        >
          Sign In
        </button>
        <!-- Responsive Sign In button for mobile -->
        <button
          (click)="signIn()"
          class="sm:hidden py-[clamp(0.4rem,1.5vw,0.6rem)] px-[clamp(0.75rem,2vw,1rem)] text-[clamp(0.75rem,1.5vw,0.875rem)] text-green-100 hover:bg-white hover:text-green-700 rounded transition-all duration-200 font-poppins"
        >
          <mat-icon class="text-[clamp(1.25rem,2.5vw,1.5rem)]">login</mat-icon>
        </button>
      </div>

      <div class="flex-none relative" *ngIf="isLoggedIn()">
        <button
          type="button"
          class="flex items-center justify-center bg-white text-green-600 border-2 border-green-600 rounded-full focus:ring-4 focus:ring-green-300 hover:bg-green-100 transition duration-200 h-[clamp(2.5rem,6vw,3rem)] w-[clamp(2.5rem,6vw,3rem)] p-[clamp(0.25rem,1vw,0.5rem)]"
          id="user-menu-button"
          aria-expanded="false"
          (click)="toggleDropdown()"
        >
          <span class="sr-only">Open user menu</span>
          <mat-icon class="text-green-600 text-[clamp(1.25rem,3vw,1.5rem)]"
            >account_circle</mat-icon
          >
        </button>

        <!-- User dropdown menu -->
        <div
          *ngIf="isDropdownOpen"
          class="absolute top-14 right-0 z-50 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow-lg w-60 transition duration-200 ease-in-out transform origin-top-right scale-95"
          [ngClass]="{ 'scale-100': isDropdownOpen }"
        >
          <div class="px-6 py-4">
            <span class="block text-lg sm:text-xl text-green-600">{{
              auth.accountProfileName
            }}</span>
            <span class="block text-sm text-gray-500 truncate">{{
              userEmail
            }}</span>
          </div>
          <ul class="py-3" aria-labelledby="user-menu-button">
            <li *ngIf="auth.isAdmin()">
              <a
                [routerLink]="['/admin/dashboard']"
                class="flex items-center px-6 py-3 text-lg sm:text-base md:text-lg text-green-600 hover:bg-green-100 font-poppins"
              >
                <mat-icon class="mr-2">dashboard</mat-icon>
                Dashboard
              </a>
            </li>
            <li *ngIf="auth.isCustomer()">
              <a
                [routerLink]="['/customer/confirmed-reservations']"
                class="flex items-center px-6 py-3 text-lg sm:text-base md:text-lg text-green-600 hover:bg-green-100 font-poppins"
              >
                <mat-icon class="mr-2">event</mat-icon>
                Reservations
              </a>
            </li>
            <li *ngIf="auth.isAdmin()">
              <a
                [routerLink]="['/admin/notifications']"
                class="flex items-center px-6 py-3 text-lg sm:text-base md:text-lg text-green-600 hover:bg-green-100 font-poppins"
              >
                <mat-icon class="mr-2">notifications</mat-icon>
                Notifications
              </a>
            </li>
            <li>
              <a
                (click)="logout()"
                class="flex items-center px-6 py-3 text-lg sm:text-base md:text-lg text-green-600 hover:bg-green-100 font-poppins"
              >
                <mat-icon class="mr-2">logout</mat-icon>
                Logout
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Mobile Menu -->
<div
  *ngIf="isMobileMenuOpen"
  class="fixed inset-0 z-50 md:hidden bg-green-600/95 backdrop-blur-sm"
  [ngClass]="{ 'small-menu': isSmallMenu }"
>
  <div class="flex flex-col h-full">
    <div class="flex justify-end p-[clamp(1rem,3vw,1.5rem)]">
      <button
        (click)="toggleMobileMenu()"
        class="text-green-100 hover:text-white transition-colors duration-200"
      >
        <mat-icon class="text-[clamp(1.5rem,3vw,2rem)]">close</mat-icon>
      </button>
    </div>
    <nav
      class="flex-1 overflow-y-auto px-[clamp(1rem,3vw,1.5rem)] py-[clamp(1rem,4vw,2rem)]"
    >
      <ul class="space-y-[clamp(0.75rem,2vw,1rem)]">
        <li>
          <a
            [routerLink]="['/home']"
            fragment="home"
            class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
            (click)="adjustMenuSize('home'); toggleMobileMenu()"
          >
            Home
          </a>
        </li>
        <li>
          <a
            [routerLink]="['/home']"
            fragment="menu"
            class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
            (click)="adjustMenuSize('menu'); toggleMobileMenu()"
          >
            Menu
          </a>
        </li>
        <li>
          <a
            [routerLink]="['/home']"
            fragment="services"
            class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
            (click)="adjustMenuSize('services'); toggleMobileMenu()"
          >
            Services
          </a>
        </li>
        <li>
          <a
            [routerLink]="['/home']"
            fragment="reviews"
            class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
            (click)="adjustMenuSize('reviews'); toggleMobileMenu()"
          >
            Reviews
          </a>
        </li>
        <li>
          <a
            [routerLink]="['/home']"
            fragment="inquiry"
            class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
            (click)="adjustMenuSize('inquiry'); toggleMobileMenu()"
          >
            Contact Us
          </a>
        </li>
        <li *ngIf="isLoggedIn()">
          <div *ngIf="isDropdownOpen" class="ml-4 mt-2 space-y-2">
            <a
              *ngIf="auth.isAdmin()"
              [routerLink]="['/admin/dashboard']"
              class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
              (click)="toggleMobileMenu()"
            >
              Dashboard
            </a>
            <a
              *ngIf="auth.isCustomer()"
              [routerLink]="['/customer/confirmed-reservations']"
              class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
              (click)="toggleMobileMenu()"
            >
              Reservations
            </a>
            <a
              *ngIf="auth.isAdmin()"
              [routerLink]="['/admin/notifications']"
              class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
              (click)="toggleMobileMenu()"
            >
              Notifications
            </a>
            <a
              (click)="logout(); toggleMobileMenu()"
              class="block py-[clamp(0.75rem,2vw,1rem)] text-[clamp(1rem,2.5vw,1.25rem)] text-green-100 hover:bg-white/10 rounded-lg transition-all duration-200 font-poppins"
            >
              Logout
            </a>
          </div>
        </li>
      </ul>
    </nav>
  </div>
</div>
